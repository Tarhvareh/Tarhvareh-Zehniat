
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <title>طرحواره و ذهنیت</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      font-family: Vazirmatn, "IRANSans", "Segoe UI", Tahoma, sans-serif;
      line-height: 1.6;
      color: #111;
      --surface: #fff;
      --muted: #555;
      --stroke: #d7d7d7;
    }

    body {
      margin: 0;
      min-height: 100vh;
      padding: 32px 16px 48px;
      display: flex;
      justify-content: center;
      background: #f4f4f4;
      color: #111;
    }

    .app-shell {
      width: min(1280px, 100%);
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    section {
      background: var(--surface);
      border-radius: 16px;
      border: 1px solid var(--stroke);
      padding: 24px;
    }

    #results-view {
      display: flex;
      flex-direction: column;
      gap: 32px;
      direction: rtl;
    }

    .page-title {
      text-align: center;
      margin-bottom: 16px;
    }

    .page-title h1 {
      margin: 0;
      font-size: 2rem;
      color: #111;
    }

    .progress-panel {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 20px;
    }

    .progress-top {
      display: flex;
      justify-content: space-between;
      color: var(--muted);
      font-size: 0.95rem;
    }

    .progress-bar {
      height: 10px;
      border-radius: 999px;
      background: #e5e5e5;
      overflow: hidden;
    }

    .progress-fill {
      display: block;
      height: 100%;
      width: 0%;
      border-radius: inherit;
      background: #111;
      transition: width 180ms ease;
    }

    .grid {
      width: 100%;
      display: grid;
      grid-template-columns: repeat(6, minmax(0, 1fr));
      gap: 16px;
      direction: rtl;
    }

    .column {
      background: #fff;
      border-radius: 14px;
      border: 1px solid var(--stroke);
      padding: 12px;
      display: flex;
      flex-direction: column;
      gap: 4px;
      max-height: calc(90vh - 220px);
      overflow-y: auto;
    }

    .column h2 {
      margin: 0 0 8px;
      font-size: 1rem;
      color: #333;
    }

    .entry {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 6px 0;
      border-bottom: 1px solid #ececec;
    }

    .entry:last-child {
      border-bottom: none;
    }

    .entry span {
      font-weight: 600;
      color: #111;
    }

    .entry input {
      width: 60px;
      padding: 6px 10px;
      border-radius: 14px;
      border: 1px solid #ccc;
      background: #fafafa;
      text-align: center;
      font-size: 0.95rem;
      transition: border-color 150ms ease, box-shadow 150ms ease;
    }

    .entry input:focus {
      outline: none;
      border-color: #111;
      box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
      background: #fff;
    }

    .column input.error {
      border-color: #f97316;
      box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.25);
    }

    .actions {
      margin-top: 24px;
      display: flex;
      justify-content: flex-end;
      gap: 12px;
    }

    button {
      background: #111;
      color: #fff;
      border: none;
      border-radius: 10px;
      padding: 12px 28px;
      font-size: 1rem;
      cursor: pointer;
      transition: opacity 120ms ease;
    }

    button:hover {
      opacity: 0.85;
    }

    button:active {
      opacity: 0.7;
    }

    button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    button.secondary {
      background: #333;
    }

    .results-header {
      text-align: center;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .results-header h2 {
      margin: 0;
      font-size: 1.7rem;
      color: #111;
    }

    .results-header p {
      margin: 0;
      color: var(--muted);
    }

    .results-list {
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .result-row {
      background: #fff;
      border-radius: 16px;
      border: 1px solid var(--stroke);
      padding: 18px 24px;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      gap: 24px;
      direction: rtl;
      flex-wrap: wrap;
    }

    .category-label {
      font-weight: 700;
      color: #111;
      white-space: nowrap;
      min-width: 240px;
      text-align: right;
    }

    .numbers {
      display: flex;
      flex-wrap: wrap;
      gap: 12px 18px;
      direction: rtl;
      flex: 1;
    }

    .number-cell {
      min-width: 54px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
    }

    .answer {
      font-weight: 600;
      color: #000;
      font-size: 1rem;
    }

    .number {
      font-size: 0.9rem;
      color: #555;
    }

    @media (max-width: 1024px) {
      .grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    @media (max-width: 640px) {
      section {
        padding: 24px;
      }

      .grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }

      .category-label {
        min-width: auto;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <section id="form-view">
      <div class="page-title">
        <h1>طرحواره و ذهنیت</h1>
      </div>

      <div class="progress-panel">
        <div class="progress-top">
          <span id="progress-status">در حال تکمیل</span>
          <span id="progress-value">۰ / ۱۲۴</span>
        </div>
        <div class="progress-bar">
          <span class="progress-fill" id="progress-fill"></span>
        </div>
      </div>

      <div class="grid" id="columns"></div>

      <div class="actions">
        <button type="button" id="submit-btn">ثبت و مشاهده نقشه ذهنیت</button>
      </div>
    </section>

    <section id="results-view" hidden>
      <div class="results-header">
        <h2>نقشه ذهنیت‌های فعال</h2>
        <!--<p>عنوان هر ردیف در سمت راست و مقادیر مرتب‌شده از راست به چپ نمایش داده شده‌اند.</p>-->
      </div>
      <div class="results-list" id="results-list"></div>
      <div class="actions">
        <button type="button" class="secondary" id="back-btn">بازگشت و ویرایش فرم</button>
      </div>
    </section>
  </div>

  <script>
    const TOTAL_NUMBERS = 124;
    const COLUMN_COUNT = 6;
    const columnsContainer = document.getElementById("columns");
    const baseCount = Math.floor(TOTAL_NUMBERS / COLUMN_COUNT);
    const remainder = TOTAL_NUMBERS % COLUMN_COUNT;
    let currentNumber = 1;
    const CATEGORIES = [
      {
        label: "ذهنیت کودک آسیب‌پذیر",
        count: 9,
        numbers: [119, 111, 105, 71, 67, 50, 36, 6, 4],
      },
      {
        label: "کودک عصبانی",
        count: 10,
        numbers: [109, 103, 79, 76, 63, 56, 49, 47, 42, 22],
      },
      {
        label: "کودک خشمناک",
        count: 10,
        numbers: [123, 101, 98, 92, 60, 54, 46, 26, 25, 14],
      },
      {
        label: "کودک ناکامی",
        count: 9,
        numbers: [110, 97, 78, 69, 61, 40, 35, 15, 12],
      },
      {
        label: "کودک بی‌انضباط",
        count: 6,
        numbers: [107, 70, 65, 30, 21, 13],
      },
      {
        label: "کودک شاد",
        count: 10,
        numbers: [122, 113, 96, 95, 68, 61, 48, 19, 17, 2],
      },
      {
        label: "تسلیم‌شده مطیع",
        count: 7,
        numbers: [108, 100, 55, 38, 37, 18, 8],
      },
      {
        label: "محافظ بی‌تفاوت",
        count: 9,
        numbers: [88, 75, 64, 59, 43, 39, 34, 33, 28],
      },
      {
        label: "ذهنیت خود آرام‌بخش",
        count: 4,
        numbers: [86, 57, 52, 41],
      },
      {
        label: "ذهنیت خود بزرگ‌منش",
        count: 10,
        numbers: [114, 91, 89, 81, 74, 44, 31, 27, 11, 10],
      },
      {
        label: "ذهنیت زورگوی تنهاجم",
        count: 9,
        numbers: [112, 102, 99, 93, 77, 53, 32, 24, 1],
      },
      {
        label: "والد تنبیه‌گر",
        count: 10,
        numbers: [118, 94, 87, 84, 72, 58, 16, 9, 5, 3],
      },
      {
        label: "والد پرتوقع",
        count: 10,
        numbers: [116, 115, 104, 90, 83, 82, 51, 45, 23, 7],
      },
      {
        label: "بزرگسال سالم",
        count: 10,
        numbers: [124, 121, 120, 117, 85, 80, 73, 62, 29, 20],
      },
    ];
    const formView = document.getElementById("form-view");
    const resultsView = document.getElementById("results-view");
    const resultsList = document.getElementById("results-list");
    const submitBtn = document.getElementById("submit-btn");
    const backBtn = document.getElementById("back-btn");
    const progressStatus = document.getElementById("progress-status");
    const progressValue = document.getElementById("progress-value");
    const progressFill = document.getElementById("progress-fill");
    const inputs = [];

    submitBtn.disabled = true;

    for (let columnIndex = 1; columnIndex <= COLUMN_COUNT; columnIndex++) {
      const column = document.createElement("div");
      column.className = "column";

      const heading = document.createElement("h2");
      heading.textContent = `ستون ${columnIndex}`;
      column.appendChild(heading);

      const numbersInThisColumn =
        baseCount + (columnIndex <= remainder ? 1 : 0);

      for (let i = 0; i < numbersInThisColumn; i++) {
        const entry = document.createElement("label");
        entry.className = "entry";

        const numberSpan = document.createElement("span");
        numberSpan.textContent = currentNumber;

        const input = document.createElement("input");
        input.type = "number";
        input.min = "1";
        input.max = "6";
        input.placeholder = "۱ تا ۶";
        input.name = `col${columnIndex}-num${currentNumber}`;
        input.dataset.number = currentNumber;

        entry.appendChild(numberSpan);
        entry.appendChild(input);
        column.appendChild(entry);
        inputs.push(input);

        input.addEventListener("input", () => {
          if (input.value) {
            const numericValue = Math.max(1, Math.min(6, Number(input.value)));
            if (!Number.isNaN(numericValue)) {
              input.value = numericValue;
            } else {
              input.value = "";
            }
          }
          updateProgress();
        });
        currentNumber++;
      }

      columnsContainer.appendChild(column);
    }

    const updateProgress = () => {
      const filled = inputs.filter((input) => input.value.trim()).length;
      const percentage = Math.round((filled / TOTAL_NUMBERS) * 100);
      progressValue.textContent = `${filled} / ${TOTAL_NUMBERS}`;
      progressFill.style.width = `${percentage}%`;
      progressStatus.textContent =
        filled === TOTAL_NUMBERS ? "آماده‌ی ثبت" : "در حال تکمیل";
      submitBtn.disabled = filled !== TOTAL_NUMBERS;
    };

    updateProgress();

    submitBtn.addEventListener("click", () => {
      const answers = {};
      let hasEmpty = false;

      inputs.forEach((input) => {
        const number = Number(input.dataset.number);
        const value = input.value.trim();

        if (!value) {
          input.classList.add("error");
          hasEmpty = true;
        } else {
          input.classList.remove("error");
          answers[number] = Number(value);
        }
      });

      if (hasEmpty) {
        alert("برای همه اعداد مقدار ۱ تا ۶ وارد کنید.");
        return;
      }

      resultsList.innerHTML = "";

      CATEGORIES.forEach((category) => {
        const row = document.createElement("div");
        row.className = "result-row";

        const numbersWrapper = document.createElement("div");
        numbersWrapper.className = "numbers";

        const orderedNumbers = [...category.numbers].sort((a, b) => a - b);
        orderedNumbers.forEach((num) => {
          const cell = document.createElement("div");
          cell.className = "number-cell";

          const answer = document.createElement("span");
          answer.className = "answer";
          answer.textContent = answers[num] || "—";

          const numberText = document.createElement("span");
          numberText.className = "number";
          numberText.textContent = num;

          cell.appendChild(answer);
          cell.appendChild(numberText);
          numbersWrapper.appendChild(cell);
        });

        const sum = category.numbers.reduce((total, num) => {
          const value = answers[num];
          return total + (typeof value === "number" ? value : 0);
        }, 0);

        const label = document.createElement("div");
        label.className = "category-label";
        label.textContent = `${category.label} (${category.count}) — جمع: ${sum}`;

        row.appendChild(label);
        row.appendChild(numbersWrapper);
        resultsList.appendChild(row);
      });

      formView.hidden = true;
      resultsView.hidden = false;
      resultsView.scrollIntoView({ behavior: "smooth" });
    });

    backBtn.addEventListener("click", () => {
      resultsView.hidden = true;
      formView.hidden = false;
      window.scrollTo({ top: 0, behavior: "smooth" });
    });
  </script>
</body>
</html>



